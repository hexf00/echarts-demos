import echarts from "echarts";
import dayjs from "dayjs";

import _ from "lodash";

let chart = echarts.init(<HTMLDivElement>document.getElementById("app"), {});

let xMin = "2020/12/10 00:00";
let xMax = "2020/12/20 23:59";
let yMin = 900;
let yMax = 1320;

const data = [
  { value: ["2020/12/10 8:09", yMin] },
  { value: ["2020/12/11 8:09", 932] },
  { value: ["2020/12/15 8:09", 901] },
  { value: ["2020/12/18 8:09", 934] },
  // null,
  { value: ["2020/12/19 8:09", 1290] },
  { value: ["2020/12/19 12:09", yMax] },
  { value: ["2020/12/20 8:09", 1230] }
];

chart.setOption({
  title: {
    text: "杭州地铁运营线网图",
    left: "center",
    top: "top"
  },
  dataZoom: [
    {
      type: "slider",
      show: true,
      xAxisIndex: [0]
      // start: 1,
      // end: 35
    },
    {
      type: "slider",
      show: true,
      yAxisIndex: [0],
      left: "93%"
      // start: 29,
      // end: 36
    },
    {
      type: "inside",
      xAxisIndex: [0]
      // start: 1,
      // end: 35
    },
    {
      type: "inside",
      yAxisIndex: [0]
      // start: 29,
      // end: 36
    }
  ],
  xAxis: {
    type: "value",
    min: 0,
    max: 2000
  },

  // tooltip: {
  //   formatter(item) {
  //     return "123123";
  //   }
  // },
  yAxis: {
    type: "value",
    min: 0,
    max: 2000
  },
  // tooltip: {
  //   show: true,
  //   trigger: "item",

  //   //,
  //   formatter: function (param) {
  //     console.log(arguments);
  //     var name = param.name;
  //     // console.log(name);
  //     // if (name.indexOf("一号线") > 0) {
  //     //   name = name.substring(0, 5);
  //     // }
  //     return name;
  //   }
  // },
  series: [
    {
      type: "lines",
      coordinateSystem: "cartesian2d",
      polyline: true,
      // effect: {
      //     show:true,
      //     symbolSize: 7,
      // },

      step: "end",
      connectNulls: false,
      data: [
        {
          name: "地铁1号线",
          lineStyle: {
            width: 3,
            color: "lightBlue"
          },
          coords: [
            [563.25, 1148.5],
            // [null, null],
            //lines 插入NaN 会导致图形不出现
            //当某数据不存在时（ps：不存在不代表值为 0），可以用 '-' 或者 null 或者 undefined 或者 NaN 表示。
            //例如，无数据在折线图中可表现为该点是断开的，在其它图中可表示为图形不存在。
            // ["-", "-"],
            [572.75, 1148.75],
            [576.5, 1148.375],
            [579.0, 1147.5],
            [581.875, 1146.125],
            [585.375, 1144.0],
            [587.0, 1142.75],
            [621.125, 1110.125],
            [628.75, 1109.75],
            [637.125, 1109.625],
            [653.625, 1109.75],
            [656.125, 1110.25],
            [658.375, 1110.875],

            [661.0, 1112.125],
            [662.25, 1112.75],
            [663.75, 1114.625],
            [665.375, 1116.5],
            [666.5, 1118.375],
            [667.5, 1120.375],
            [668.375, 1122.5],
            [669.25, 1124.5],
            [669.625, 1126.625],
            [670.125, 1128.75],
            [670.125, 1130.0],
            [670.125, 1131.75],

            [null, null],
            // [NaN, 1131.75],
            // [NaN, NaN],
            // [670.375, NaN],

            [670.375, 1284.125],
            [670.4375, 1286.75],
            [670.5625, 1288.3125],
            [671.0, 1289.75],
            [671.625, 1291.1875],
            [672.4375, 1292.5625],
            [674.0625, 1294.875],
            [674.9375, 1295.9375],
            [675.9375, 1296.875],
            [677.8125, 1298.5625],
            [678.75, 1299.25],
            [679.875, 1299.8125],
            [680.8125, 1300.25],
            [681.875, 1300.625],
            [683.375, 1301.125],
            [684.6875, 1301.5625],
            [687.1875, 1302.1875],
            [689.375, 1302.75],
            [691.625, 1303.125],
            [694.0, 1303.1875],
            [741.125, 1303.5625],
            [984.5, 1303.875],
            [1016.125, 1304.125],
            [1020.125, 1303.96875],
            [1022.84375, 1304.15625],
            [1026.84375, 1304.59375],
            [1029.59375, 1305.1875],
            [1032.3125, 1305.59375],
            [1035.46875, 1306.5],
            [1037.6875, 1307.625],
            [1039.6875, 1308.25],
            [1041.875, 1309.40625],
            [1043.90625, 1310.5625],
            [1045.21875, 1311.875],
            [1046.6875, 1313.0625],
            [1048.78125, 1315.0],
            [1051.125, 1317.625],
            [1121.375, 1388.125],
            [1124.375, 1390.3125],
            [1126.9375, 1392.0625],
            [1130.3125, 1394.4375],
            [1133.75, 1396.3125],
            [1137.4375, 1397.8125],
            [1141.0625, 1398.8125],
            [1144.125, 1399.375],
            [1147.9375, 1399.6875],
            [1302.25, 1400.25],
            [1312.75, 1400.375],
            [1317.375, 1399.4375],
            [1321.5, 1398.1875],
            [1325.5625, 1396.125],
            [1329.0625, 1393.9375],
            [1332.375, 1390.6875],
            [1334.5, 1387.625],
            [1336.125, 1384.625],
            [1337.125, 1381.4375],
            [1337.3125, 1379.0625],
            [1338.0, 1180.25],
            [1337.625, 1013.5],
            [1338.125, 865.875],
            [1337.75, 862.875],
            [1337.375, 861.3125],
            [1336.5, 859.4375],
            [1335.125, 857.875],
            [1333.0625, 855.375],
            [1331.5, 854.0],
            [1328.9375, 851.625],
            [1294.5, 817.3125],
            [1292.9375, 815.5],
            [1290.8125, 813.3125],
            [1289.75, 811.375],
            [1288.5, 808.9375],
            [1287.6875, 806.8125],
            [1286.6875, 801.8125],
            [1286.9375, 798.8125],
            [1287.75, 795.625],
            [1289.125, 792.375],
            [1291.0, 789.5625],
            [1294.0, 786.3125],
            [1297.125, 783.125],
            [1300.1875, 780.3125],
            [1304.5625, 775.875],
            [1311.25, 769.25],
            [1426.5, 653.75],
            [1430.0, 649.75],
            [1432.75, 645.5],
            [1434.25, 640.0],
            [1434.375, 638.375],
            [1434.4375, 631.0],
            [1434.4375, 543.5],
            [1435.1875, 540.75],
            [1436.125, 538.3125],
            [1437.75, 536.25],
            [1439.3125, 534.4375],
            [1441.4375, 532.6875],
            [1444.1875, 531.4375],
            [1447.375, 530.8125],
            [1451.25, 530.25],
            [1453.5625, 530.0],
            [1580.8125, 529.3125],
            [1687.875, 529.1875],
            [1772.4375, 529.1875],
            [1776.25, 528.3125],
            [1778.875, 527.0625],
            [1781.0, 525.875],
            [1782.625, 524.375],
            [1784.3125, 522.6875],
            [1785.8125, 520.4375],
            [1786.5, 518.125],
            [1787.0625, 515.125],
            [1787.25, 513.3125],
            [1787.25, 508.125],
            [1787.5, 478.75],
            [1787.6875, 475.75],
            [1788.0, 473.375],
            [1789.0625, 470.6875],
            [1789.875, 469.4375],
            [1791.3125, 468.0625],
            [1793.25, 466.9375],
            [1796.0, 466.5],
            [1799.625, 466.25],
            [1803.6875, 466.125],
            [1923.5, 466.0]
          ]
        }
      ]
    }
    // {
    //   type: "lines",
    //   coordinateSystem: "cartesian2d",
    //   polyline: true, //多段线支持
    //   // effect: {
    //   //     show:true,
    //   //     symbolSize: 7,
    //   // },

    //   data: [
    //     {
    //       name: "地铁2号线",
    //       lineStyle: {
    //         width: 3,
    //         color: "lightBlue"
    //       },
    //       step: "end",
    //       coords: [
    //         [579.0, 1147.5],
    //         [581.875, 1146.125],
    //         [585.375, 1144.0],
    //         [587.0, 1142.75],
    //         [621.125, 1110.125],
    //         [628.75, 1109.75],
    //         [637.125, 1109.625],

    //         [1020.125, 1303.96875],
    //         [1022.84375, 1304.15625],
    //         [1026.84375, 1304.59375],
    //         [1029.59375, 1305.1875],
    //         [1032.3125, 1305.59375],
    //         [1035.46875, 1306.5],
    //         [1037.6875, 1307.625],
    //         [1039.6875, 1308.25],
    //         [1041.875, 1309.40625],
    //         [1043.90625, 1310.5625],
    //         [1045.21875, 1311.875],
    //         [1046.6875, 1313.0625],
    //         [1048.78125, 1315.0],
    //         [1051.125, 1317.625],
    //         [1121.375, 1388.125],
    //         [1124.375, 1390.3125],
    //         [1126.9375, 1392.0625],
    //         [1130.3125, 1394.4375],
    //         [1133.75, 1396.3125],
    //         [1137.4375, 1397.8125],
    //         [1141.0625, 1398.8125],
    //         [1144.125, 1399.375],
    //         [1147.9375, 1399.6875],
    //         [1302.25, 1400.25],
    //         [1312.75, 1400.375],

    //         [1336.5, 859.4375],
    //         [1335.125, 857.875],
    //         [1333.0625, 855.375],
    //         [1331.5, 854.0],
    //         [1328.9375, 851.625],
    //         [1294.5, 817.3125],
    //         [1292.9375, 815.5],
    //         [1290.8125, 813.3125],
    //         [1289.75, 811.375],
    //         [1288.5, 808.9375],
    //         [1287.6875, 806.8125],
    //         [1286.6875, 801.8125],
    //         [1286.9375, 798.8125],
    //         [1287.75, 795.625],
    //         [1289.125, 792.375],
    //         [1291.0, 789.5625],
    //         [1294.0, 786.3125],
    //         [1297.125, 783.125],
    //         [1300.1875, 780.3125],
    //         [1304.5625, 775.875],
    //         [1311.25, 769.25],
    //         [1426.5, 653.75],
    //         [1430.0, 649.75],
    //         [1432.75, 645.5],
    //         [1434.25, 640.0],
    //         [1434.375, 638.375],
    //         [1434.4375, 631.0],
    //         [1434.4375, 543.5],
    //         [1435.1875, 540.75],
    //         [1436.125, 538.3125],
    //         [1437.75, 536.25],
    //         [1439.3125, 534.4375],
    //         [1441.4375, 532.6875],
    //         [1444.1875, 531.4375],
    //         [1447.375, 530.8125],

    //         [1778.875, 527.0625],
    //         [1781.0, 525.875],
    //         [1782.625, 524.375],
    //         [1784.3125, 522.6875],
    //         [1785.8125, 520.4375],
    //         [1786.5, 518.125]
    //       ]
    //     }
    //   ]
    // }
  ]
});

// null实际被转换为了NaN, NaN
// var option = {
//   xAxis: {
//     type: "category",
//     boundaryGap: false,
//     data: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]
//   },
//   yAxis: {
//     type: "value"
//   },
//   series: [
//     {
//       data: [820, 932, 901, null, 934, 1290, 1330, 1320],
//       type: "line"
//       // areaStyle: {}
//     }
//   ]
// };

// chart.setOption(option);

chart.on("focusnodeadjacency", function () {
  console.log("focusnodeadjacency");
});

//@ts-ignore
chart.getZr().on("mousemove", function (params) {
  const { offsetX, offsetY, target, topTarget } = params;
  console.log("zr mousemove", offsetX, offsetY, target, topTarget);
});
//@ts-ignore
chart.getZr().on("mouseover", function () {
  console.log("zr mouseover");
});
//@ts-ignore
chart.getZr().on("mouseout", function () {
  console.log("zr mouseout");
});
chart.on("mousemove", function () {
  console.log("mousemove");
});
chart.on("mouseover", function () {
  console.log("mouseover");
});
chart.on("mouseout", function () {
  console.log("mouseout");
});
